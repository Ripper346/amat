\documentclass[10pt,twocolumn,letterpaper]{article}
\include{formatAndDefs}

\def\iccvPaperID{1142} % *** Enter the ICCV Paper ID here
\def\httilde{\mbox{\tt\raisebox{-.5ex}{\symbol{126}}}}

\begin{document}
\title{AMAT: Medial Axis Transform for Natural Images \\ Supplemental Material}
\maketitle
%\thispagestyle{empty}

\section{Introduction}\label{sec:introduction}
In this supplemental material we include details and qualitative results that we could not include in the main submission due to the limited space.
\stavros{Complete depending on the material we add. Don't forget to include the video.}


\section{Complexity Analysis}\label{sec:complexity}
First, we re-define some useful quantities to make the supplemental material self-contained.
We consider a finite set of radii $r\in \scales : \{r_1,\ldots,r_R \}$, and a disk of radius $r_j$, centered at point $\p{i}\in X^I$,
is denoted as $D_{\p{i},r_j} = D_{ij}$.
The most demanding step in our method is the computation of the disk costs
\begin{equation}
c_{ij} = \sum_k \sum_l \norm{\f{ij} - \f{kl} }^2 \quad \forall k,l: D_{kl} \subset D_{ij}.
\label{eq:diskcost}
\end{equation}
This quantity must be computed at all location-radius combinations, and for all the contained disks, of radii $r\in\scales$.

For simplicity, we make all derivations in the continuous domain, but they can be readily extended to the discrete domain.
Let $r\in(0,R]$; given a disk of radius $r'$ at point $\p{}$, the number of all fully contained disks of radii $r<r'$ is
\begin{equation}
N_d^{r'} = \int_{0}^{r'} 2 \pi r (r'-r) dr,\label{eq:ndr}
\end{equation}
and summing over all radii $r'$ we have that the total number of disks at $\p{}$ is
\begin{equation}
N_d = \int_0^R N_d^{r'}dr'.\label{eq:nd}
\end{equation}
Putting together~\refeq{eq:ndr} and~\refeq{eq:nd} we get:
\begin{align}
N_d & = 2\pi \int_0^{R} \int_0^{r'} r (r'-r) dr dr' \\
  & = 2\pi \int_0^{R} \int_0^{r'} rr'-r^2 dr dr' \\
  & = 2\pi \int_0^{R} \left. r'\frac{r^2}{2}-\frac{r^3}{3} \right \rvert_{0}^{r'} dr' \\
  & = 2\pi \int_0^{R} \frac{(r')^3}{6} dr' \\
  & = 2\pi \int_0^{R} \frac{(r')^3}{6} dr' = \frac{\pi}{12} R^4
\end{align}





\section{Qualitative Results}\label{sec:qualitative}
In this section we present additional qualitative results of medial axes computed with our method, and the respective reconstructions.
We also include a video showing the execution of the greedy algorithm on a test image.
\stavros{Add more details about the various details shown in the video}


\begin{figure*}[t]
\centering
\def\imgw{0.245}

\def\img_id{85048}
\includegraphics[width=\imgw \textwidth]{\img_id_resized.jpg}
\includegraphics[width=\imgw \textwidth]{\img_id_axes_simplified.pdf}
\includegraphics[width=\imgw \textwidth]{\img_id_branches_simplified.pdf}
\includegraphics[width=\imgw \textwidth]{\img_id_gt_skel.pdf}

\def\img_id{295087}
\includegraphics[width=\imgw \textwidth]{\img_id_resized.jpg}
\includegraphics[width=\imgw \textwidth]{\img_id_axes_simplified.pdf}
\includegraphics[width=\imgw \textwidth]{\img_id_branches_simplified.pdf}
\includegraphics[width=\imgw \textwidth]{\img_id_gt_skel.pdf}

\def\img_id{145086}
\includegraphics[width=\imgw \textwidth]{\img_id_resized.jpg}
\includegraphics[width=\imgw \textwidth]{\img_id_axes_simplified.pdf}
\includegraphics[width=\imgw \textwidth]{\img_id_branches_simplified.pdf}
\includegraphics[width=\imgw \textwidth]{\img_id_gt_skel.pdf}

\def\img_id{101087}
\includegraphics[width=\imgw \textwidth]{\img_id_resized.jpg}
\includegraphics[width=\imgw \textwidth]{\img_id_axes_simplified.pdf}
\includegraphics[width=\imgw \textwidth]{\img_id_branches_simplified.pdf}
\includegraphics[width=\imgw \textwidth]{\img_id_gt_skel.pdf}

\def\img_id{54082}
\includegraphics[width=\imgw \textwidth]{\img_id_resized.jpg}
\includegraphics[width=\imgw \textwidth]{\img_id_axes_simplified.pdf}
\includegraphics[width=\imgw \textwidth]{\img_id_branches_simplified.pdf}
\includegraphics[width=\imgw \textwidth]{\img_id_gt_skel.pdf}
\caption{\textbf{Medial axes}. From left to right: Input image, AMAT medial axes, medial branches (color-coded), ground-truth skeletons.
Axis color indicates the respective encodings $\f{}$, and black is used for unused points.}
\label{fig:axes}
\end{figure*}



\begin{figure*}[t]
\centering
\def\imgw{0.195}

\def\img_id{3096}
\includegraphics[width=\imgw \textwidth]{\img_id_resized.jpg}
\includegraphics[width=\imgw \textwidth]{\img_id_rec_mil.png}
\includegraphics[width=\imgw \textwidth]{\img_id_rec_gtseg.png}
\includegraphics[width=\imgw \textwidth]{\img_id_rec_gtskel.png}
\includegraphics[width=\imgw \textwidth]{\img_id_rec_amat.png}

\def\img_id{300091}
\includegraphics[width=\imgw \textwidth]{\img_id_resized.jpg}
\includegraphics[width=\imgw \textwidth]{\img_id_rec_mil.png}
\includegraphics[width=\imgw \textwidth]{\img_id_rec_gtseg.png}
\includegraphics[width=\imgw \textwidth]{\img_id_rec_gtskel.png}
\includegraphics[width=\imgw \textwidth]{\img_id_rec_amat.png}

\def\img_id{119082}
\includegraphics[width=\imgw \textwidth]{\img_id_resized.jpg}
\includegraphics[width=\imgw \textwidth]{\img_id_rec_mil.png}
\includegraphics[width=\imgw \textwidth]{\img_id_rec_gtseg.png}
\includegraphics[width=\imgw \textwidth]{\img_id_rec_gtskel.png}
\includegraphics[width=\imgw \textwidth]{\img_id_rec_amat.png}

\def\img_id{295087}
\includegraphics[width=\imgw \textwidth]{\img_id_resized.jpg}
\includegraphics[width=\imgw \textwidth]{\img_id_rec_mil.png}
\includegraphics[width=\imgw \textwidth]{\img_id_rec_gtseg.png}
\includegraphics[width=\imgw \textwidth]{\img_id_rec_gtskel.png}
\includegraphics[width=\imgw \textwidth]{\img_id_rec_amat.png}

\def\img_id{54082}
\includegraphics[width=\imgw \textwidth]{\img_id_resized.jpg}
\includegraphics[width=\imgw \textwidth]{\img_id_rec_mil.png}
\includegraphics[width=\imgw \textwidth]{\img_id_rec_gtseg.png}
\includegraphics[width=\imgw \textwidth]{\img_id_rec_gtskel.png}
\includegraphics[width=\imgw \textwidth]{\img_id_rec_amat.png}

\def\img_id{101087}
\includegraphics[width=\imgw \textwidth]{\img_id_resized.jpg}
\includegraphics[width=\imgw \textwidth]{\img_id_rec_mil.png}
\includegraphics[width=\imgw \textwidth]{\img_id_rec_gtseg.png}
\includegraphics[width=\imgw \textwidth]{\img_id_rec_gtskel.png}
\includegraphics[width=\imgw \textwidth]{\img_id_rec_amat.png}

\caption{\textbf{Image reconstruction}. From left to right: Input image, MIL~\cite{tsogkas2012learning}, GT-seg, GT-skel, AMAT.}
\label{fig:experiments:reconstruction}
\end{figure*}





{\small
\bibliographystyle{ieee}
\bibliography{iccv2017.bib}
}

\end{document}